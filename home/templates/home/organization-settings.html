{% extends "home/layouts/layout-no-side-nav.html" %}
{% load static %}

{% block title %}
    OneTable - Organization Settings
{% endblock %}

{% block headername %}
  OneTable
{% endblock %}

{% block headerlink %}
  {% url 'home' %}
{% endblock %}

{% block header %}
  {% include 'home/layouts/component-header-workspace.html' %}
{% endblock %}

{% block bodyclass %}
  class="bg-white"
{% endblock %}

{% block content %}

<div class="container mt-4">
  <!-- Account page navigation-->
  <header class="page-header page-header-compact page-header-light border-bottom bg-white mb-4">
    <div class="container-fluid">
        <div class="page-header-content">
            <div class="row align-items-center justify-content-between pt-3">
                <div class="col-auto mb-3">
                    <h1 class="page-header-title">
                        <div class="page-header-icon"><i data-feather="settings"></i></div>
                        Settings for {{ organization.name }}
                    </h1>
                </div>
            </div>
        </div>
    </div>
  </header>
  <!-- Main page content-->
  <div class="container">
  <nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <a class="nav-item nav-link active" id="nav-details-tab" data-toggle="tab" href="#nav-details" role="tab" aria-controls="nav-home" aria-selected="true">Details</a>
    <a class="nav-item nav-link" id="nav-users-tab" data-toggle="tab" href="#nav-users" role="tab" aria-controls="nav-profile" aria-selected="false">Users</a>
    </div>
</nav>

<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-details" role="tabpanel" aria-labelledby="nav-details-tab">
  <div class="row">
      <div class="col-lg-8">
          <!-- Email notifications preferences card-->
          <div class="mb-4">
              
              <div class="card-body">
                <form method="POST" action="{% url 'edit_organization' organization_pk=organization.pk %}">{% csrf_token %}
                  {{ form.as_p }}
                  <button type="submit" class="btn btn-lg btn-primary font-weight-500 mr-3">
                    Update Organization
                  </button>
                </form>
              </div>
          </div>
      </div>
     
  </div>
  
  </div>
  <div class="tab-pane fade show" id="nav-users" role="tabpanel" aria-labelledby="nav-users-tab">
  <div class="row">
      <div class="col-12">
      <div class="col-12 w-100">
      <div class="btn btn-primary float-right" data-toggle="modal" data-target="#addUser">Add Users</div>
      </div>
      {% for connect in connection %}
        <div class="card w-100">          
          <div class="card-body">
          <h5 class="card-title">{{connect.user.username}}
          {% if connect.created %}
          <span class="bg-muted">(Creator)</span>
          {% endif %}
          </h5>
          <p class="card-text">{{connect.user.email}}</p>  
        </div>
        </div>
      {% endfor %}

      </div>
      {% comment %} <div class="col-lg-4">
          <!-- Notifications preferences card-->
          <div class="card">
              <div class="card-header">Archive Organization</div>
              <div class="card-body">
                  <p>You can archive this organization if you will no longer use it. Data will still be available under the archived filter.
                  <form method="POST" action="{% url 'archive_organization' organization_pk=organization.pk %}">
                    {% csrf_token %}
                    <button type="submit" name="project_id" class="btn btn-danger-soft text-danger">
                      Archive this organization
                    </button>
                  </form>
              </div>
          </div> {% endcomment %}
      </div>
  </div>
  
  </div>



</div>
<div class="modal fade" id="addUser" tabindex="-1" role="dialog" aria-labelledby="addUSER" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Add User</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <form method="POST" action="">
      {% csrf_token %}
      <input type="text" placeholder="Enter user's E-mail" class="form-control" />
      </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<script>
$('#add-user').click(function(){

})


</script>




{% endblock %}
